#!/bin/bash
echo ""
read -r -p "   [0;33mConky Installer[0m

   This script will install conky-all, fortunes, and fortune-mod, and 
   install a customized conky chooser and conkys that can be accessed 
   through either the toggles menu, or the keybind super + c.
   
   [0;33m----------------------------------------------------------
   
   Please press enter to install Conky.
   
   ----------------------------------------------------------[0m
      
   Or close this terminal window to quit the install." ;
   if : >/dev/tcp/8.8.8.8/53; then
echo ""
cd /tmp || exit
rm -R /tmp/conky*
wget https://raw.githubusercontent.com/sleekmason/packages/master/conky-bear-bookworm2.zip --show-progress -q &&
unzip -q /tmp/conky-bear-bookworm2.zip
sudo apt-get install -y conky-all fortunes fortune-mod
if test -f ~/.config/conky; then
	mv ~/.config/conky ~/.config/conky.bak &&
	cp -r /tmp/conky ~/.config
else                
	cp -r /tmp/conky ~/.config              
fi
echo ""
sed -i '/Conky,               ~\/.config\/conky\/scripts\/conky-chooser,         preferences-system/d' ~/.config/jgmenu/prepend.csv
                sed -i '/Xkill/i Conky,               ~\/.config\/conky\/scripts\/conky-chooser,         preferences-system' ~/.config/jgmenu/prepend.csv
echo ""
echo "[0;32m----------------------------------------------------------------------[0m"
echo ""
echo "   [0;32mA new menu entry will be placed in Toggles.[0m"
echo ""
echo "[0;32m----------------------------------------------------------------------[0m"
echo $'\n\nPress any key to quit ...'; read -srn1
else
echo ""
 echo "   [0;31m-----------------------------------------------------[0m"
 echo ""
 echo "   [0;33mNo Internet connection. Please connect and try again.[0m"
 echo ""
 echo "   [0;31m-----------------------------------------------------[0m"
echo ""
echo $'\n\nPress any key to quit ...'; read -srn1
fi
